



<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rating Firebase Half Star</title>

  <!-- Bootstrap Icons (biar bisa pakai icon lain kalau mau) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <style>
    .star {
      padding: 4px;
      font-size: 35px;
      cursor: pointer;
      transition: 0.15s;
      user-select: none;
    }
    .star.active {
      color: gold;
    }
  </style>
</head>
<body>

<div class="container mt-4">
  <h3>Rating Firebase (Auto Save + Half Star)</h3>

  <!-- 1. RATING HALF STAR -->
  <div id="ratingBox">
    <span class="star" data-value="1">☆</span>
    <span class="star" data-value="1.5">⯨</span>

    <span class="star" data-value="2">☆</span>
    <span class="star" data-value="2.5">⯨</span>

    <span class="star" data-value="3">☆</span>
    <span class="star" data-value="3.5">⯨</span>

    <span class="star" data-value="4">☆</span>
    <span class="star" data-value="4.5">⯨</span>

    <span class="star" data-value="5">☆</span>
  </div>

  <p class="mt-2">Rating tersimpan: <b id="savedRating">-</b></p>
</div>


<!-- ========================= -->
<!-- 2. FIREBASE + JS RATING   -->
<!-- ========================= -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

// ===============================
// FIREBASE CONFIG (ISI MILIK ABANG)
// ===============================
const firebaseConfig = {
  apiKey: "AIzaSyDMMo7jS9kyVl4Yased0Vrmh6aMXO67Z1Q",
  authDomain: "all-in-71496.firebaseapp.com",
  databaseURL: "https://all-in-71496-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "all-in-71496",
  storageBucket: "all-in-71496.firebasestorage.app",
  messagingSenderId: "1030408536243",
  appId: "1:1030408536243:web:669abdd465cfa25c8fb0c6",
  
};

// Init Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);


// ===============================
// RATING LOGIC
// ===============================
let rating = 0;
const stars = document.querySelectorAll(".star");

function updateStars(val) {
  stars.forEach(s => {
    s.classList.toggle("active", Number(s.dataset.value) <= val);
  });
}

// Klik → auto save
stars.forEach(star => {
  star.addEventListener("click", () => {
    rating = Number(star.dataset.value);

    // Update tampilan
    updateStars(rating);

    // Simpan otomatis ke Firebase
    set(ref(db, "rating/user1"), { rating });

    document.getElementById("savedRating").textContent = rating;
  });
});

// ===============================
// LOAD DATA SAAT MASUK HALAMAN
// ===============================
get(ref(db, "rating/user1")).then(snap => {
  if (snap.exists()) {
    rating = snap.val().rating;
    updateStars(rating);
    document.getElementById("savedRating").textContent = rating;
  }
});
</script>

</body>
</html>
